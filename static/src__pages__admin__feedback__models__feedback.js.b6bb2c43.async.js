webpackJsonp([48],{mrpj:function(e,t,a){"use strict";function n(e){return Object(p.a)("feedbackService.list",e,!0)}function r(e){return Object(p.a)("feedbackService.updateStatus",e,!0)}function s(e){return Object(p.a)("feedbackService.reply",e,!0)}Object.defineProperty(t,"__esModule",{value:!0});var u=(a("4e87"),a("PIoE")),c=a("Tv2M"),i=a.n(c),o=a("9qwy"),d=a.n(o),p=a("vLgD");t.default={namespace:"feedback",state:{datas:[],totalElements:0,item:{},replyVisible:!1},reducers:{modifyState:function(e,t){var a=t.payload;return d()({},e,a)},setStatusPage:function(e,t){var a=t.payload,n=e.datas.map(function(e){return e.id===a.record.id&&(e.status=a.status),e});return d()({},e,{datas:n})},onReplyPage:function(e,t){var a=t.payload,n=e.datas.map(function(e){return e.id===a.id&&(e=a),e});return d()({},e,{datas:n,replyVisible:!1})}},effects:{index:i.a.mark(function e(t,a){var r,s,u,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,s=a.call,u=a.put,e.next=4,s(n,r);case 4:return c=e.sent,e.next=7,u({type:"modifyState",payload:{datas:c.datas,totalElements:c.size}});case 7:case"end":return e.stop()}},e,this)}),setStatus:i.a.mark(function e(t,a){var n,s,c,o,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,c=a.put,o="1"===n.status?"0":"1",e.next=5,s(r,{id:n.id,status:o});case 5:return d=e.sent,d&&u.a.success(d.datas),e.next=9,c({type:"setStatusPage",payload:{record:n,status:o}});case 9:case"end":return e.stop()}},e,this)}),onReply:i.a.mark(function e(t,a){var n,r,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,c=a.put,e.next=4,r(s,n);case 4:if(!(o=e.sent)){e.next=9;break}return u.a.success("\u56de\u590d\u6210\u529f"),e.next=9,c({type:"onReplyPage",payload:o.datas});case 9:case"end":return e.stop()}},e,this)})},subscriptions:{setup:function(e){var t=e.history,a=e.dispatch;return t.listen(function(e){"/admin/feedback"===e.pathname&&a({type:"index",payload:e.query})})}}}}});